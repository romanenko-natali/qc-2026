# Лабораторна робота №5
## E2E автоматизація (Playwright)

**Максимальна оцінка:** 20 балів

### Мета роботи

Навчитися писати End-to-End тести для веб-додатків за допомогою Playwright та використовувати SQL для підготовки та перевірки тестових даних.

### Вибір треку

| Трек | Мова | Документація |
|------|------|--------------|
| **JavaScript** | TypeScript/JavaScript | https://playwright.dev/docs/intro |
| **Java** | Java | https://playwright.dev/java/docs/intro |
| **Python** | Python | https://playwright.dev/python/docs/intro |

---

## Запуск тестів

### JavaScript

```bash
# Ініціалізація
npm init playwright@latest

# Запуск всіх тестів
npx playwright test

# З UI
npx playwright test --ui

# Конкретний файл
npx playwright test tests/e2e/schedule.spec.ts

# Генерація звіту
npx playwright show-report
```

### Java (Gradle)

**build.gradle:**
```groovy
dependencies {
    testImplementation 'com.microsoft.playwright:playwright:1.40.0'
    testImplementation 'org.junit.jupiter:junit-jupiter:5.10.0'
}

test {
    useJUnitPlatform()
}
```

```bash
# Встановлення браузерів
./gradlew exec -PmainClass=com.microsoft.playwright.CLI --args="install"

# Запуск всіх тестів
./gradlew test

# Конкретний клас
./gradlew test --tests "ScheduleE2ETest"

# З детальним виводом
./gradlew test --info
```

### Python

```bash
# Встановлення
pip install pytest-playwright
playwright install

# Запуск всіх тестів
pytest

# З відображенням браузера
pytest --headed

# Конкретний файл
pytest tests/e2e/test_schedule.py

# З генерацією звіту
pytest --html=report.html
```

---

## Структура проєкту

```
schedule-testing/
├── tests/
│   ├── e2e/
│   │   ├── pages/
│   │   │   ├── LoginPage.[ts|java|py]
│   │   │   ├── SchedulePage.[ts|java|py]
│   │   │   └── <EntityPage>.[ts|java|py]
│   │   ├── specs/
│   │   │   ├── schedule.spec.[ts|java|py]
│   │   │   └── <entity>.spec.[ts|java|py]
│   │   └── helpers/
│   │       └── database.[ts|java|py]
│   └── ...
├── playwright.config.[ts|js]     ← (JS трек)
├── build.gradle                   ← (Java трек)
├── pytest.ini                     ← (Python трек)
└── ...
```

---

## Завдання

### Завдання 1: Базові E2E-тести (6 балів)

Напишіть тести для основних сценаріїв системи:

1. **Відображення розкладу** — сторінка завантажується, основні елементи видимі
2. **Логін** — автентифікація в системі (успішний та неуспішний вхід)
3. **Навігація** — перехід між сторінками системи після логіну
4. **Перегляд сутностей** — перегляд списку сутностей за варіантом
5. **Фільтрація/пошук** — фільтрація або пошук по сутностях

**Вимоги:**
- Мінімум 6 тестів
- Використовуйте assertions для перевірки стану UI

### Завдання 2: Page Object Model (6 балів)

Створіть Page Objects для 2-3 сторінок системи.

**Вимоги:**
- Мінімум 2 Page Objects (LoginPage + Page за варіантом)
- Кожен PO має мінімум 3 методи
- Тести використовують Page Objects замість прямих селекторів

### Завдання 3: Складні сценарії (4 бали)

Напишіть тести для складних сценаріїв за вашим варіантом:

1. **CRUD через UI** — створення, перегляд, редагування, видалення запису через форму
2. **Drag & Drop** — перетягування елементів (за варіантом)
3. **Валідація форм** — перевірка валідації при заповненні форм (обов'язкові поля, формати)

**Вимоги:**
- Мінімум 3 складних тести
- Тести мають перевіряти послідовність дій

### Завдання 4: SQL для тестування (4 бали)

1. **Setup** — підготовка тестових даних перед тестами
2. **Verification** — перевірка даних в БД після дій в UI
3. **Cleanup** — очищення тестових даних після тестів

**Вимоги:**
- Реалізуйте helper для роботи з БД
- Мінімум 2 тести з перевіркою даних в БД

---

## Варіанти

### Варіант 1

| Завдання | Деталі |
|----------|--------|
| **CRUD сутність** | **RoomType** (тип аудиторії) — створення, перегляд, редагування, видалення типу аудиторії через форму |
| **Drag & Drop** | Поставити заняття на певний час (формування розкладу) |
| **Page Objects** | LoginPage, RoomTypePage |
| **SQL** | Setup/cleanup для RoomType, перевірка створення типу аудиторії в БД |

### Варіант 2

| Завдання | Деталі |
|----------|--------|
| **CRUD сутність** | **Room** (аудиторія) — створення, перегляд, редагування, видалення аудиторії через форму |
| **Drag & Drop** | Поставити аудиторію після певної аудиторії (зміна порядку відображення аудиторій для менеджера) |
| **Page Objects** | LoginPage, RoomPage |
| **SQL** | Setup/cleanup для Room, перевірка створення аудиторії в БД |

### Варіант 3

| Завдання | Деталі |
|----------|--------|
| **CRUD сутність** | **Department** (кафедра) — створення, перегляд, редагування, видалення кафедри через форму |
| **Drag & Drop** | Поставити групу після певної групи (зміна порядку відображення груп у розкладі) |
| **Page Objects** | LoginPage, DepartmentPage |
| **SQL** | Setup/cleanup для Department, перевірка створення кафедри в БД |

### Варіант 4

| Завдання | Деталі |
|----------|--------|
| **CRUD сутність** | **Teacher** (викладач) — створення, перегляд, редагування, видалення викладача через форму |
| **Drag & Drop** | Поставити заняття на певний час (формування розкладу) |
| **Page Objects** | LoginPage, TeacherPage |
| **SQL** | Setup/cleanup для Teacher, перевірка створення викладача в БД |

### Варіант 5

| Завдання | Деталі |
|----------|--------|
| **CRUD сутність** | **Student** (студент) — створення, перегляд, редагування, видалення студента через форму |
| **Drag & Drop** | Поставити аудиторію після певної аудиторії (зміна порядку відображення аудиторій для менеджера) |
| **Page Objects** | LoginPage, StudentPage |
| **SQL** | Setup/cleanup для Student, перевірка створення студента в БД |

### Варіант 6

| Завдання | Деталі |
|----------|--------|
| **CRUD сутність** | **Class** (пара/заняття) — створення, перегляд, редагування, видалення заняття через форму |
| **Drag & Drop** | Поставити групу після певної групи (зміна порядку відображення груп у розкладі) |
| **Page Objects** | LoginPage, ClassPage |
| **SQL** | Setup/cleanup для Class, перевірка створення заняття в БД |

### Варіант 7

| Завдання | Деталі |
|----------|--------|
| **CRUD сутність** | **Subject** (предмет) — створення, перегляд, редагування, видалення предмету через форму |
| **Drag & Drop** | Поставити заняття на певний час (формування розкладу) |
| **Page Objects** | LoginPage, SubjectPage |
| **SQL** | Setup/cleanup для Subject, перевірка створення предмету в БД |

### Варіант 8

| Завдання | Деталі |
|----------|--------|
| **CRUD сутність** | **Group** (група) — створення, перегляд, редагування, видалення групи через форму |
| **Drag & Drop** | Поставити аудиторію після певної аудиторії (зміна порядку відображення аудиторій для менеджера) |
| **Page Objects** | LoginPage, GroupPage |
| **SQL** | Setup/cleanup для Group, перевірка створення групи в БД |

---

## Критерії оцінювання

| Критерій | Бали |
|----------|------|
| Базові E2E-тести (6+ тестів) | 6 |
| Page Object Model (2+ PO) | 6 |
| Складні сценарії (3+ тести) | 4 |
| SQL: setup, verification, cleanup | 4 |
| **Разом** | **20** |
